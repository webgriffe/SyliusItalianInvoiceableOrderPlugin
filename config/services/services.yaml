parameters:
    app.taxation.eu_zone_code: 'EU'

services:
    webgriffe_sylius_italian_invoiceable_order.form.extension.italian_invoiceable_address:
        class: Webgriffe\SyliusItalianInvoiceableOrderPlugin\Form\Extension\ItalianInvoiceableAddressTypeExtension
        tags:
            - { name: form.type_extension, extended_type: Sylius\Bundle\AddressingBundle\Form\Type\AddressType }
    
    webgriffe_sylius_italian_invoiceable_order.address_comparator:
        class: Webgriffe\SyliusItalianInvoiceableOrderPlugin\Comparator\ItalianInvoiceableAddressComparatorDecorator
        decorates: sylius.comparator.address
        arguments:
            - '@webgriffe_sylius_italian_invoiceable_order.address_comparator.inner'
    
    app.taxation.italian_tax_calculation_strategy:
        class: Webgriffe\SyliusItalianInvoiceableOrderPlugin\Model\ItalianTaxCalculationStrategy
        arguments:
            - 'italian_tax_calculation_strategy'
            - [
                '@sylius.applicator.taxation.order_item_units',
                '@sylius.applicator.taxation.order_shipment'
            ]
            - '%app.taxation.eu_zone_code%'
        tags:
            - { name: sylius.taxation.calculation_strategy, type: italian_tax_calculation_strategy, label: 'Italian tax calculation' }
    
    webgriffe_sylius_italian_invoiceable_order.modifier.address_form_values:
        class: Webgriffe\SyliusItalianInvoiceableOrderPlugin\Modifier\AddressFormValuesModifier
        tags:
            - { name: sylius_shop.modifier.address_form_values }
